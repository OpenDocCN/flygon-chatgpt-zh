# 8

ChatGPT编程提示

除了你在其他章节中了解的技能，ChatGPT在编程方面表现得相当不错。这可能看起来很奇怪；但ChatGPT是一个庞大的语言模型，程序是用各种编程语言编写的，其中大多数遵循比英语和ChatGPT处理得很好的其他人类语言更正式的结构。

如果你是程序员或从事软件开发工作，请尝试将ChatGPT整合到你的工作流程中，看看它能为你做些什么。即使你对编程的兴趣是随意的，只是需要快速拼凑一个简单粗暴的Word VBA宏或Python脚本来执行一次性任务，ChatGPT也许能为你节省时间和精力。

让我们从那个$6400万的问题开始...  ## ChatGPT可以帮助你处理哪些编程语言？

简短的回答是：大多数。Python，Java，JavaScript，C，C++，C#，Ruby，PHP，Swift，Go，R，SQL，TypeScript，VBA，Rust和MATLAB——ChatGPT很乐意帮助你处理所有这些，以及更多。

除了这些编程语言，ChatGPT还可以帮助使用Bash和PowerShell等工具进行shell脚本编写。它还可以协助你处理HTML和CSS，虽然它们不是真正的编程语言，但在网站中被普遍使用。（回顾[第7章](c07.xhtml)了解更多关于HTML和CSS的内容。）

截至本文撰写时，ChatGPT的训练数据截至2021年9月，因此ChatGPT对当时及之前的编程语言了解最为深入。如果你正在使用更新的编程语言，比如Carbon（又名Carbon-Lang，于2022年推出）或A Tensor Language（ATL，也是2022年新推出的），ChatGPT将了解较少信息，但如果你使用Web浏览模式，它可以在网络上搜索。  ## ChatGPT如何帮助你进行编程？

ChatGPT可以在编程方面提供五种主要帮助：

+   **概念化程序或代码目标。** 在开始编写代码之前，通常需要描述你计划创建的程序或其他代码对象。如果程序很复杂，考虑将其分解为组件。ChatGPT可以帮助你定义代码应该做什么。

+   **编写代码。** 一旦你清晰地界定了编码目标��就是开始编写的时候，或者让ChatGPT开始为你编写的时候。ChatGPT不仅可以帮助你绘制程序或对象的结构，还可以为你编写完整的代码。

+   **调试代码。** 有时，ChatGPT或你的初始版本的代码可能无法正常工作。当出现这种情况时，你可以要求ChatGPT为你调试代码。

+   **重构代码。** 一旦代码能够运行，你可以让ChatGPT重新构造代码，减少其复杂性，使其更易于阅读和维护。

+   **优化代码。** 当代码结构符合你的要求时，你可以告诉ChatGPT优化代码，使其运行更快，消耗更少资源，或两者兼而有之。

我们将在以下章节中通过示例查看这五个步骤。  ## 概念化程序或代码目标

你通常的第一步是构思你想创建的程序或代码。以下是你可能用来寻求 ChatGPT 帮助的提示示例：

+   ![提示图标](images/prompticon.png) **我应该使用哪种编程语言来分析大量数据？**

ChatGPT 建议使用 Python、R、SQL 和 Julia 等语言，并解释了每种语言的优缺点。

+   ![提示图标](images/prompticon.png) **为创建一个 Python 脚本编写一个计划，提示用户输入信息，然后将信息存储在 Excel 工作表中。**

ChatGPT 提供了一个详细的计划，从设置 Python 环境和创建新脚本，一直到测试脚本并扩展以处理更复杂的情况。

+   ![提示图标](images/prompticon.png) **使用 Go 语言，我想创建一个函数，将两个浮点数相加并将结果转换为整数。你能告诉我如何开始吗？**

再次，ChatGPT 提供了完整的细节，包括一个警告，即 Go 使用静态类型，这意味着你需要指定函数使用的输入和输出的数据类型。  ## 编写代码

要让 ChatGPT 写代码，告诉它要使用哪种语言以及要创建什么代码。以下是三个示例：

+   ![提示图标](images/prompticon.png) **用 C 编写一个“Hello, Universe!”程序，包括解释每个语句的注释。**

ChatGPT 返回了一个带有解释的程序。你可以点击“复制代码”按钮复制代码，粘贴到你的 C 编译器中，并运行它。

+   ![提示图标](images/prompticon.png) **在 Rust 中实现一个冒泡排序算法，打印出每次操作，以便我能理解结果是如何实现的。**

ChatGPT 返回了一个“Rust 中冒泡排序算法的简单实现”，附有一个示例和详细解释。

+   ![提示图标](images/prompticon.png) **如何使用 Python ruamel.yaml 库获取两个字典：一个用于标签和文本的键值对，另一个用于包含注释的标签行的标签和注释的键值对？**

ChatGPT 建议使用 ruamel.yaml 解析器中的 CommentedMap 对象，并提供了一个带有详细解释的示例。  ## 调试代码

当你有无法运行的代码时，看看 ChatGPT 是否能帮助你调试。ChatGPT 擅长处理根本无法运行的代码、部分运行但产生特定错误的代码，以及运行似乎成功但由于逻辑错误产生错误输出的代码。

### 调试无法运行的代码

如果 ChatGPT 在此聊天中创建或使用了代码，你可以简单地将 ChatGPT 引用到代码中。如果 ChatGPT 不知道代码，你需要将其粘贴进来。给出一个提示，如下：

+   ![提示图标](images/prompticon.png) **以下代码无法运行。请检查它并告诉我哪里出错了。**

按 Shift+Enter 创建新行，然后按 Ctrl+V 粘贴代码。

如果ChatGPT能够识别问题，它会返回一个简要的解释问题的原因以及发生的原因。它还会返回一个更新了已识别修复的代码版本，供你尝试。

为了对代码进行充分测试，你可能想要向ChatGPT请求测试用例。以下是一个示例提示：

+   ![Prompticon](images/prompticon.png) **给我四个测试用例，用于测试你刚刚修复的代码。**

ChatGPT立即返回了这些测试用例，解释了每个测试用例的作用（例如“使用空字符串进行测试”），并展示了每个测试用例应该产生的输出。  ### 调试产生特定错误的代码

如果你的代码产生了特定错误，比如Python中的SyntaxError错误，请给ChatGPT提供代码并询问为什么会出现该错误。以下是一个示例：

+   ![Prompticon](images/prompticon.png) **为什么这个Python语句会抛出SyntaxError？**

按下Shift+Enter创建新行，然后按Ctrl+V粘贴有问题的语句。

ChatGPT返回了一个解释，以及经过修正的代码。

+   ![Chatgpticon](images/chatgpticon.png) *语法错误发生是因为你没有在尝试打印的字符串周围加上括号。在Python 3中，*******print*******语句被*******print()*******函数取代*。  ### 调试产生逻辑错误的代码

有时你的代码会运行而不抛出错误，但会给出一个明显错误的结果。这通常是*逻辑*错误的结果，这是一个与代码的逻辑有关而不是代码语法的错误。

当你的代码产生逻辑错误时，你可以询问ChatGPT出了什么问题。例如：

+   ![Prompticon](images/prompticon.png) **为什么下面的代码返回正数而不是负数？**

ChatGPT分析了代码，提供了详细的解释，并给出了一个修复后的代码版本供我尝试。  ## 重构代码

到这个时候，你的代码应该已经可以运行了。除非你只是临时抢修解决一个永远不会再出现的问题，现在还不是找树荫休息的时候。相反，你应该考虑重构你的代码，减少其复杂性，使其更易阅读和维护。最好让ChatGPT为你重构代码。

以下是重构代码的四个提示示例：

+   ![Prompticon](images/prompticon.png) **请重构这段代码，使其易于阅读和维护。**

+   ![Prompticon](images/prompticon.png) **我想让这段代码更易于维护。你能找到一个现有的库，像我这里做的那样提取数据吗？**

+   ![Prompticon](images/prompticon.png) **请用case语句替换下面的if-then-else链。**

+   ![Prompticon](images/prompticon.png) **重构这段代码，将离散功能移入一组函数中以减少嵌套。**

对于这些示例中的每一个，您会提供代码给 ChatGPT，除非 ChatGPT 已经在当前聊天中访问到了代码。## 优化代码

一旦您将代码重构到您喜欢的状态，您可以让 ChatGPT 优化代码。

这里有两个示例提示，您可以用来要求 ChatGPT 优化您的代码。通常情况下，您会粘贴代码，除非 ChatGPT 已经在此聊天中访问到了。

-   ![Prompticon](images/prompticon.png) **识别下面的 C# 代码中可能存在的性能问题，并告诉我如何修复。**

+   ![Prompticon](images/prompticon.png) **我希望您帮助我识别这段代码中最耗费计算资源的操作，并告诉我如何让它运行更快。**

您也可以在不提供代码的情况下以一般术语寻求优化建议。这里是一个示例：

+   ![Prompticon](images/prompticon.png) **我正在使用 Python 和 LXML，尝试获取所有具有“persist”属性的元素。我的代码遍历每个元素并检查是否具有“persist”属性。代码运行缓慢。有没有更好的方法来做这个？**

ChatGPT 建议使用 XPath 语言直接选择具有“persist”属性的 XML 元素。
